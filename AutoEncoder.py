import tensorflow as tf
import numpy as np
import matplotlib.pyplot as plt
import Scaler
import function
import random


test_array = [[2.0931721644791335, 3.8530962942125444, 4.843628984067103, 4.701597187962798, 3.1162774073665576, 4.515356714188262, 4.440146030275304, 2.81537260498204, 3.523394737630756, 2.015991014092082, 3.945025782370837, 4.971001945672079, 3.35686678202267, 4.107809976911122, 4.002090759778409, 4.612193562893551, 3.570061957830598, 2.024974456526118, 3.0752345382109514, 3.84726676222831, 4.090032820703081, 2.5863532480852656, 4.555873680053231, 3.1538643800546975, 3.816979590014044, 4.429531824825682, 2.9914909201724407, 2.484106379103574, 3.6165971449871037, 67.85753009842698],
[3.8054095069420955, 4.382423570706209, 4.068038734547058, 3.9969853391793575, 2.686612206807833, 2.4624248282316588, 2.4198541046722917, 3.846140339144193, 3.521142976757263, 2.028636845942288, 4.024768579568165, 0.05876873239940835, 3.701061344815435, 3.478897219570793, 4.1682742199141956, 4.199776364754089, 3.9466016300860893, 3.6976375617368826, 2.4997485993749433, 2.9469686093413188, 1.2832793803703748, 4.2734201834418695, 3.137580519033604, 3.2029402182773232, 3.589146433592766, 4.1178329407930985, 3.2237360789608696, 2.604026129541192, 4.426085502287872, 68.84779871094312],
[2.0256922073333135, 3.1123490831857437, 0.23002968575273713, 0.8761216690156903, 2.2819792277113096, -0.9022666683673579, 4.526166979963112, 3.0496691525799573, 2.7360210253269974, 1.8086959953104853, 3.0423528856481243, 4.405621586848392, 4.388271911544804, 1.6291365351331857, 4.236805880218389, 4.4537001904110465, 4.0621512125613375, 4.089102977654077, 3.432870834037505, 2.8957029480067193, 4.100156302061395, 1.9967883256004189, 2.7748592708204907, 3.239922179330652, 3.7683470407465163, 4.539538470313472, 2.7459971188606875, 3.2911090923279867, 3.242493274784582, 67.90855705900964],
[1.9975675479803836, 4.289516567906873, 2.1773539077630852, 4.775273239609655, 2.995541849600171, 4.641071994068112, 4.158381478290494, 0.3441192570077527, 3.6691904441370324, 2.025455780502378, 3.505398545095027, 1.6703818324833548, 3.8109923214902093, 3.8198391535937506, 4.0554993826850945, 4.830862593417779, 3.504182492813003, 3.984198734579925, 3.4306691682113737, 3.6970123657577383, 3.066439894640219, 4.134831704001928, 1.3320993316685583, 3.1612437463521044, 4.137281571899697, 4.341866663071274, 3.8358419935163943, 3.26008242449011, 3.6747392131305716, 67.83940198625706],
[1.4349216892242245, 2.8696810448043917, 1.5873180291018167, 4.674050073522516, 2.7675847382371797, 3.00339962470032, 3.9382619732580357, 4.378638668297498, 3.7876278340762854, 2.0373877472379855, 0.7433157563912772, 0.671736406576967, 4.235427889562627, 1.1299346830129953, 4.283703777151364, 4.515290725854476, 3.8312107090181655, 0.5529160353522753, 4.818470300688792, 3.830472387149568, 4.99554286027045, 4.151688985596708, 4.062149378454344, 3.238926628536429, 3.830055083834455, 4.372106446787254, 3.0581793607991363, 2.2164639008642317, 4.012379195962314, 67.78860175961398],
[0.350968719564666, 3.4110793870534337, 3.6116701744206576, 4.094427117729006, 2.9182847210301586, 4.4515405844576605, 4.619377726160645, 4.957424254264201, 3.1600516792182214, 1.9590323705394697, 3.850669962517134, 3.4319231940669517, 4.450858113465512, 3.332865727745854, 2.6319078508610985, 4.766636488325535, 3.3674108627500465, 4.408645603934699, 3.1665918002898907, 3.853280317587919, 4.350662508563617, 0.6463737919935357, 2.28125450076143, 3.378058139791497, 3.8093894121239846, 4.00080203680446, 3.307765942576673, 3.589810808464684, 3.6019715439904596, 67.80433644143666],
[1.7087174403038412, 4.222691014469002, 5.045169562080998, 4.688885637674304, 2.8333962854832038, 4.954734783870506, 4.78724333936764, 0.3757112640152036, 3.815290982919604, 1.9015704001551899, 4.734583306641495, 4.627789233737166, 3.7430076362037097, 2.8948432718675474, 4.060900909067445, 2.5587706425382266, 3.507420158746141, 1.9633039401512578, 3.2416679961172137, 3.6780012186687525, 4.719706014583744, 4.087238773873802, 3.1993064622228253, 3.158139085807306, 3.7943368267487227, 4.489142263919428, 3.009269821600132, 3.526460173073875, 3.61496010616954, 67.61095785254105],
[1.9396372004073985, 3.967180303701695, 2.765533204203551, 4.634759468744225, 2.989152663742935, 4.911402823786538, 4.288702251084111, 5.004671772023357, 3.618654419545531, 2.013042589323341, 3.9653314755361246, 4.680547937349252, 3.7169041552336233, 3.5209084293506816, 4.178005333373736, 4.665736747003532, 3.583179934174765, 3.982692616898616, 3.23275736103432, 3.6845499974307576, 4.062780778892073, 4.201798011241252, 3.6776334611921646, 3.162834213134701, 3.800517407709399, 4.679174603428693, 2.8624307446234414, 2.2635292031534733, 3.689927677401306, 67.85095775065314],
[1.9838420960760603, 4.29976084278886, 3.8739908669181826, 4.1350023386239725, 3.0338937611682226, 3.1356933054898324, 3.44761252704547, 0.7869094495783435, 4.278570205712531, 3.1061406145858466, 4.290069739290576, 0.20902911691601275, 3.815291891109216, 2.59391713383878, 4.1056957112675585, 1.152940997856025, 3.577110601484676, 4.009142095345491, 1.6893750294298293, 0.5806007524849713, 3.2519760176507186, 4.180006718259769, 4.519210854201829, 3.2920230528787444, 3.8085560736145125, 4.760309881555277, 3.7680817429959306, 2.564222114698166, 2.3162362530956035, 68.58121259900982],
[1.997117421881398, 2.0708838278867403, 0.9119818890516979, 0.3284636254548082, 2.9973707651902863, 3.775677378140278, 4.941806372789487, 2.5704089836059945, 3.2418725351146502, 2.0458631916569514, 3.8709492109927752, 0.6296880166900592, 0.5481605945946677, 3.611446028606709, 4.213209547960507, 5.0679835328682135, 1.1198803704902724, 2.608239236093009, 0.4895602495421821, 4.312113663580957, 3.8406286695862453, 4.1724347188051905, 1.3811473213737446, 2.3282528629132537, 3.875282559094313, 1.549452761967403, 4.8226114555875705, 1.9975111166135602, 3.170883360516956, 67.8633597145654],
[1.9463547571543791, 4.61740944966932, 0.868759922886972, 0.3264284374547174, 2.832846684493651, 4.555475471294622, 4.1425104290830435, 0.4810869723092481, 3.710027013602704, 2.0147784196558503, 3.8570592675153255, 4.0250008325433155, 3.745642113650007, 3.4480989342173363, 2.1626809971467185, 5.045144036730816, 4.271916483579314, 4.256087960691935, 2.7851224706497497, 3.8358996740187528, 4.117478023272364, 4.283397782596941, 4.499330341961063, 3.147370801322407, 3.92551146652248, 4.384514182413454, 3.013143457371749, 3.413525942051343, 3.6616848364483268, 67.6469415695308],
[1.9647880554673678, 4.295066799776834, 4.243804324680517, 1.5335444132785905, 4.3754688131870125, 4.572369903070943, 4.0122076280366255, 4.770862253841327, 3.8097333632902393, 3.445811695541826, 3.899808607383098, 4.119993159156596, 2.863600325743361, 3.4842329753506998, 0.7095401085471502, 4.456780129819949, 3.9831934802088336, 4.246126496579318, 3.2419095933488826, 3.87844301669371, 4.109522041575666, 4.325058709823667, 3.5018983030299426, 3.2971465117277505, 3.804212185088458, 4.271924870984751, 3.052523748129419, 2.4703445375211293, 3.450502726197996, 66.48014008732486],
[1.851252177839251, 3.869487336079618, 3.677505603321713, 4.588973014501114, 3.587774058499023, 4.471879481312097, 4.22307533134001, 3.992541833604752, 3.0198931459254617, 1.8990465889071362, 4.397375937726907, 2.0054571614901495, 0.1956474797205283, 3.600129245512366, 3.981123378125621, 4.471197508461074, 1.1788770756841973, 2.7690141680312155, 4.035420628670662, 4.1549859705777035, 3.9502851120175153, 4.700699377108198, 3.4520605425176636, 3.810014712305399, 3.978919658198259, 4.888969853603037, 1.8200991779161932, 1.121966815606957, 1.311756156055867, 63.87681644751291],
[2.256866232817933, 4.319801161550592, 0.8133283090380553, 1.6664263339396808, 2.97115482174166, 4.615153969786135, 4.33247302881383, 2.8649729899084764, 4.012942202131448, 1.8261134881251633, 4.02513659176564, 3.969798714440884, 3.344821681596274, 1.6803448198962496, 3.119005453905262, 0.4800394224715137, 4.743485517826651, 3.7504058547553996, 2.934849706517067, 4.242212327691856, 4.656386658732164, 4.223406058976076, 4.390446106335947, 3.0941384488159294, 3.7861729743763006, 2.609239492447586, 2.2337800231738467, 2.953847661628874, 4.010252148931477, 68.91763960696673],
[1.8535861462650598, 4.43826986441098, 4.367580744773135, 4.641811463600537, 2.97350030211779, 4.293910856359509, 4.528280520081929, 2.3719770708345966, 3.1465425723344884, 2.024345898873396, 3.9384215862709464, 4.967029229076878, 3.3571176235357134, 3.4967883834684335, 4.18527999943615, 4.542447003442797, 3.6180008331632343, 4.230411024100626, 3.3384188826625456, 4.836809480824649, 4.117759648415748, 4.183728207640079, 4.543627640365324, 3.4270738833868903, 3.814276990175671, 4.317019128886411, 2.9393229597269377, 2.741505249846371, 3.757374086164862, 67.88598712801571],
[3.9888238506290827, 0.5148533015021632, 1.0200145112110908, 1.05154225029955, 2.9720890331330403, 3.0685979464415123, 3.9287102787585395, 5.063520390038028, 3.046072597672752, 5.00130048368506, 4.707399805321716, 3.80245144538114, 3.1147827382903723, 3.3032016662937216, 4.1697601768988335, 4.03036146651359, 2.948120012013028, 0.8789410792603769, 2.2312638903390694, 3.770141923953096, 2.230481147322144, 4.17281871710534, 2.031284235191533, 2.867431751365795, 3.8055998649233276, 3.1646097588519013, 3.2394329038193357, 1.7063990451576634, 4.002023384397518, 67.49099602889542],
[1.9389054972358486, 4.152042495563487, 2.990664627895559, 4.380015138720547, 2.978761270037396, 4.552037844108107, 4.094566839563529, 4.9407087715850295, 3.466857992405602, 2.0357291183454493, 3.5461899601820694, 5.000822601712769, 3.912682393374052, 2.1358876556674335, 3.819597879131879, 4.383818926273084, 3.58921011937248, 1.8481493312080768, 3.3802138866487437, 3.700981629622249, 4.131148440820481, 3.9003446200992777, 0.7587592425502709, 2.9656593283031216, 3.865785701917306, 4.357665873297356, 2.9447845054438244, 4.021911102305019, 3.7278523056683457, 82.1868540862592],
[3.4491317365488587, 2.2961041567894207, 1.103150765581409, 0.35411522921649863, 5.015725050820147, 3.0695884895672894, 5.013851128056787, 4.549816156992594, 2.2182619843128757, 2.7139315171056193, 1.3573480952331476, 3.9021917491375473, 1.6657293229653802, 4.203779853532168, 2.109677828485687, 3.6488383876747608, 2.87253366449878, 3.837310463833254, 1.5504501089158036, 3.8019996457262266, 5.113089389326641, 4.450216068455616, 2.8898982144337158, 3.5781423087890327, 3.0183727908415583, 0.14551840666511567, 2.6908590307838995, 2.752938333302059, 2.7986918881791105, 67.90512297393273],
[1.879446669259351, 4.665956089747964, 2.996970645507631, 4.639355934896629, 2.1917408422132745, 4.884710547772718, 4.294113234193245, 2.369316925743921, 3.7222449952918994, 1.997570432269073, 3.8727449323531062, 4.739113636170939, 3.8746859426245033, 3.507727143579, 4.171605879569239, 3.997946976611159, 0.9016787203968698, 4.114483719897664, 3.9111826682732604, 3.6928265035590675, 4.0117519135968, 4.088403855238103, 4.448060531800643, 3.1691696026651828, 3.8129289590563173, 4.3898663608832456, 2.9976155307096626, 4.678571465383609, 3.7930404895539502, 69.27203604012395],
[2.1301590764448712, 4.774522060584603, 1.7529951093084088, 4.236813014582148, 2.877565407070339, 4.629747971880937, 3.832346964367358, 2.1651921851631157, 3.43058811105181, 2.1123637119057106, 1.366533249505044, 4.8532030174139535, 0.594715620912857, 4.820698942178407, 3.945264182786682, 2.628725009555218, 4.852470553132264, 1.6911194999395656, 3.04232991418402, 3.104524445171582, 0.753400159442042, 4.8761400184800445, 3.7980135617984376, 3.556657447062811, 3.8072345302296555, 3.7919320543096164, 4.6534220494537974, 2.562330408959201, 0.6701470837404111, 66.64311612052568],
[1.8868805262099857, 3.846188606006247, 0.9725854276901594, 4.618703115862013, 2.965554400578909, 4.843407392389635, 3.791809193149743, 4.602758016433167, 3.7710666302401705, 2.691073032995409, 0.5842745891534696, 2.8083809149688523, 3.7670706986713207, 3.7009415411751707, 5.03948445665428, 0.563072290184632, 3.5787695435607234, 4.467554774552127, 2.7617284304572203, 3.7047252126749997, 4.901694199035748, 4.199391801197741, 4.604059238281966, 3.244097623027658, 3.8119434605797227, 4.5671308928429175, 2.594413707571228, 4.216979888457269, 3.5543045821258374, 67.91734439317815],
[2.015400762548612, 2.607882187968608, 4.339100737551313, 3.512844659401871, 1.3442778525565025, 3.7466876444624715, 3.7703853384367068, 2.433702805980791, 1.9843031324340654, 1.2576481159847037, 3.5877394902677437, 1.482155178410784, 0.5130369432066288, 3.410426647292745, 4.239799015020775, 2.238766241523017, 2.8200926068962278, 4.411089853379574, 2.6213791497809913, 3.206718510892392, 4.092056960146158, 4.134255688231788, 4.715721283767446, 3.4379625094073614, 3.8904271612803827, 4.211761079157373, 2.9086449567635233, 3.640899633332008, 3.103201502389854, 67.88372697051199],
[-0.35603277827116875, 2.52229864130582, 2.2636280181056727, 0.4403307616213402, 2.5421354321630876, 2.2689876654451853, 2.054857372799515, 3.1967239625228827, 3.754744237975313, 2.3954065465681316, 0.9762119146521332, 2.342828875702354, 3.8832115605802406, 4.824094300438102, 0.265337394111225, 1.4907318807121517, 3.350046872705706, 0.44181660878889034, 4.031059936247706, 1.3937634944256088, 3.6389255237703257, 4.216168668019565, 3.537383059944131, 3.406445071997391, 3.7863133701565017, 1.9423559371419765, 3.472148924476466, 2.873289632827409, 3.622772208201083, 69.87918403231636],
[3.652264290312408, 1.243139203318817, 3.5203344400888024, 4.7509764733376745, 2.95972684718426, 4.285124045642547, 4.666305088740035, 1.043764088063752, 3.7931821426629306, 2.103526487552569, 2.690324118830137, 2.8724087422730857, 3.6628848384244757, 4.147928299268294, 4.205130366368954, 4.7802612335436026, 3.5946454123683442, 3.8272700904381605, 3.288637992387416, 4.014118949173066, 3.4442360559986875, 4.2652887665690855, 3.5756904051276313, 3.285521110314669, 3.813112595567588, 0.7443155207734526, 2.9640784876930084, 2.2656336315213497, 3.558852893189411, 70.59968083110968],
[1.9497474588305375, 4.314521985938245, 2.094150930851461, 1.2471180513775955, 2.762958544526402, 4.746236631899158, 4.4730651915228234, 3.9509661373370095, 1.5476453931446832, 2.4425542769614537, 4.379636930789363, 4.749851557458393, 3.7216738525887223, 1.914840831567239, 3.9908098742969464, 2.8865047346164876, 3.6840673572515614, 4.613417649999163, 3.6055162863381054, 3.6759451434513495, 1.4693071449199198, 3.371864941065112, 3.2077880817340487, 2.963097279499567, 4.02153869027786, 4.357894968052846, 3.3835597984050945, 2.2048735763672163, 2.7205704536237914, 67.89816011198938],
[1.9947650489816466, 1.475619728755499, 3.940395826178605, 0.550855619167956, 4.7376029688765, 4.789307696258177, 3.9637466030116166, 1.852719936804271, 2.2079244016917015, 1.400687862632902, 3.9258801181905336, 3.023058107404456, 3.77073444034509, 4.8713990808362375, 4.084935876790587, 3.7329267389031275, 3.8201933036013984, 2.634184148187127, 2.773097388720501, 1.9669589878712612, 3.874968056346423, 2.0242130463023336, 4.883735148147608, 3.1472997601407755, 3.845618739579052, 0.9864805174104635, 2.981201936005694, 2.412976956541196, 3.4988104719407374, 66.4511980762839],
[1.995015771960943, 4.237011117436597, 4.249378730719804, 1.1200432326143317, 2.5340204939758335, 4.423775867541901, 4.387482229852308, 4.5479396351360455, 1.8626372769019146, 2.410102286324387, 3.8630069965830454, 4.827461217481037, 3.7495789283802505, 3.3979297874901837, 4.129114270198069, 4.421569285783923, 2.847473962177075, 4.25909055947189, 3.158828990736763, 3.40046798124041, 3.8344161237295853, 4.224040517121802, 3.4354102002515523, 3.179288949772624, 3.812339139507529, 4.169296421339335, 4.876948530491212, 2.1536786731671835, 3.7031796263819268, 68.57819248993005],
[1.7324060371432564, 3.70758523779081, 3.8144940001304786, 3.399849138779426, 2.819158561009444, 4.479868683009809, 3.024254811058567, 0.11340896923149842, 4.0309296670039485, 3.5083470985582506, 3.5244384597066283, 1.418795484551482, 3.8052034523904155, 1.7456195863875728, 2.5924967187798975, 4.470713367867163, 2.525982287827927, 3.4600197768279757, 4.394221385580414, 3.6048646664045645, 4.373784193037765, 1.908981731796368, 1.0094871836989388, 3.5842547783788237, 3.6142737144493298, 2.256296374022631, 2.739741445587957, 3.8936011407148854, 3.602079244327625, 67.87933248364716],
[2.1450669963068756, 4.222650156060101, 0.6234844675847484, 4.8902720875306045, 3.1326896603793526, 3.9975284051219844, 3.9069018919473213, 4.925064126995556, 3.4114576474921368, 2.043211611713169, 3.882836009452721, 5.075079020891612, 3.820797965833609, 2.9102403719820042, 3.967472431028038, 5.016853738324985, 3.601633821712776, 0.39340000487275234, 3.2789654032800306, 3.698444670964005, 4.564317353797793, 4.251137498104335, 5.026586919240194, 4.142565186659017, 3.796576396072339, 4.910352948003984, 2.9901339601686114, 2.199117111979879, 3.6291489389903653, 67.71129438483105],
[1.9759650232639256, 4.202600197032921, 3.694071509376046, 3.8729787610795814, 2.8689335887480194, 4.605259743931457, 2.0589653719144967, 4.927226154160177, 3.597492753736434, 1.9108590801141532, 3.8500396858007564, 4.794655033252116, 3.834065869018075, 3.563328514735911, 4.127106387861343, 2.1198732237531277, 3.3334540927926524, 3.0685105142212796, 4.614682469726094, 3.670103404789344, 4.0898625991271995, 4.239233136601338, 4.58834439491564, 3.214434268676768, 3.412327876488954, 3.1065230380911943, 2.9279388514299045, 2.8960008467906073, 3.7249926735759553, 66.58951994013601],
[2.9557897800028528, 4.212494618729487, 2.5967754657862923, 3.84032448615235, 2.9099561568715595, 4.710419083707535, 4.196253668009878, 2.7793461849009184, 3.856294048943623, 2.19672826529433, 1.1334609933835136, 4.36197401585695, 4.2384180174772235, 3.834289101951162, 4.227138607316798, 4.3574077697031095, 4.013844198253968, 3.8323520407187948, 2.834838030710013, 3.8986172816459037, 4.692304343127241, 3.659901431932217, 0.12016514705115242, 3.214588801131773, 3.9336571615127913, 0.20333329061138727, 3.1977942662714356, 2.583019834799006, 3.99903109184635, 68.4327622180983],
[1.9794158506766537, 1.2318438246430463, 0.07049846143786283, 4.480114626244942, 3.088313741139869, 4.3999246883361645, 5.064985295499957, 0.054495419518681844, 3.8521251032663963, 2.004790785822711, 3.949343223528128, 2.6005153364188267, 3.7476390484438276, 0.38348575692301323, 4.174370992691779, 4.491368377938384, 3.619100542808854, 1.5458974732395563, 2.8131550134307153, 3.763818418891144, 4.282456076913142, 4.184814014679555, 4.666794972194773, 3.170354445011393, 3.823051010276055, 4.4892236565959065, 3.034097914097403, 4.035815548527773, 3.4937510424725744, 67.79344077077764],
[1.9650493462650922, 4.74276176359369, 4.288495516740494, 4.1326415109285195, 3.6591887388392172, 1.7806208197910323, 4.173702353831622, 1.4484728920984389, 1.0423351139328936, 2.20996680553986, 4.255655333785493, 1.3045318699469846, 3.53724236213952, 3.253021436784508, 4.162198925264406, 0.7122496955433553, 4.145666174040741, 0.40242058152635024, 3.1934372837611638, 2.9131908747581936, 3.8734874030556767, 4.213314199475089, 1.352935400926358, 2.911136053147358, 3.821515296283844, 4.309519678511115, 2.6342189833646685, 3.983951915575449, 3.6436010722863714, 71.44559209875169],
[2.146737865475116, 2.2758162123724306, 1.8265657093530314, 4.646725675800149, 3.1837444477221535, 2.602355395565448, 2.184291009509892, 3.900166267370502, 2.6574303480949233, 3.3740439334388834, 3.7094377820240143, 1.9715279095657252, 3.752699375102974, 3.8841502842672715, 4.096044173166112, 4.642912435181506, 3.5062758539394028, 3.6107962235722386, 2.6873738324361334, 2.9360255349275355, 4.269618462144714, 3.642500525370545, 3.240310861159338, 3.3467347100872096, 3.8182707679700703, 1.245747530561119, 3.0871649393483107, 3.58416447129573, 3.6418201751804338, 68.31463773103481],
[1.9235015415158576, 3.20516103065446, 1.5677369527485256, 0.7305568785335419, 3.488390381746583, 0.21095810930545042, 1.5936560801944988, 4.417570776782669, 2.988529817107021, 2.590074028431287, 3.9730145667700643, 2.2606549993296428, 1.676089690538997, 1.77959711973488, 3.666360209303412, 3.8040650835598706, 2.1311850822942864, 4.291031397955208, 2.966705957220398, 3.566202199800618, 4.249498851294608, 4.6194658276829434, 3.5907988829357107, 4.3159958207224625, 3.6984857075773925, 3.6872024624579463, 3.0670398759017843, 3.263917725454702, 3.2660660567070954, 67.54018948041542],
[2.224759169511927, 4.337574320737412, 1.030913061226949, 4.630989849529187, 2.9794572522978675, 4.816420798474036, 4.160274467267606, 3.4050985641904106, 3.725057521448085, 2.1777751570053256, 4.707231246954552, 4.761154666011096, 1.073475530455147, 4.569036040128719, 1.9963784828288027, 4.5035398495478285, 3.5679938250089243, 4.3068055581114555, 3.0852966012380034, 3.729182878422086, 4.1628928139646915, 4.178606787796531, 1.9996395023597768, 3.9767307756746546, 3.8020169928617005, 4.146382435632738, 3.006156023154002, 2.352462104698481, 4.39079899544307, 67.59537558369242],
[1.6413498433862428, 4.359633171151353, 4.102577764942498, 0.3409599364771361, 2.9289046768203866, 3.738042695689148, 0.8697183680840856, 4.203228800636877, 0.37988642412645673, 1.5730739959039053, 4.136613009791344, 4.978663273412148, 4.120744897464008, 2.91986790641914, 4.410897369182415, 4.505221216160029, 4.662844171097297, 4.1488799285414775, 3.588269392127467, 3.5526615151384786, 4.171528746749139, 4.3440235937762015, 4.1750391330496175, 0.17541003134287964, 3.8144286514127126, 3.8179503983752716, 3.0106273016378577, 3.510929374776207, 3.871987390572693, 68.42499256655813],
[1.8717687832924423, 2.456324745461036, 3.808368317419917, 4.604177449361145, 2.770423757205899, 4.503554102187793, 4.006482196943489, 0.7479825776966869, 3.6536249816742044, 2.166769496492174, 4.020938583842558, 4.521390585650668, 3.6991154484555397, 3.485422672568679, 3.6703071008829973, 4.485450057023241, 2.7364714645564305, 4.27685324928192, 5.10350114219572, 3.6278114929705287, 4.186109661500483, 4.222848413537997, 4.5504660568407544, 3.127186025545491, 3.7602825424679986, 2.4740015307701624, 3.035561166686303, 2.5747305153076505, 4.189716440189358, 67.67821713656808],
[2.094237735998122, 1.5724211726861705, 3.214319168022485, 4.938721928768891, 2.933118628519934, 4.381565947870077, 4.181751103487376, 4.836466848518323, 3.451369856374759, 2.041919175991749, 0.8649749350973974, 4.724617024566723, 3.7409602285051546, 3.3266714495883782, 3.8496032694495534, 4.468072451960659, 3.6103386418371732, 4.479083743254395, 3.082189965109971, 3.686362679175594, 4.965777693215493, 4.463109116319637, 4.81906713091552, 2.9807481432610112, 3.821976752577364, 1.0852116007504709, 2.97960870653795, 2.638544306782573, 3.674510938985772, 67.98535341356785],
[1.9518800485467234, 3.604132314116979, 0.44797802687171273, 4.191394652658309, 3.2360702266299706, 4.039486118787383, 4.213356956120013, 0.8999791909139362, 0.024769022846923578, 1.8926956990160568, 3.000187921941528, 3.288809432251273, 1.0095513386430253, 1.0972907751813334, 4.30899358450366, 2.319034817400438, 3.673266796020041, 3.694188753995566, 3.1286510406197032, 5.015773829391099, 3.978624012576136, 0.10198396706643376, 4.75410291020005, 3.040032698385985, 3.6808958153381326, 0.469790508374561, 2.3314592145909305, 4.258911687614836, 3.6851601847883924, 68.04175411690197],
[3.11616229192062, 3.221342106159882, 2.949595037839946, 0.7061389387775671, 3.4409162639913435, 3.329026342165807, 3.4550186808172847, 3.7718903928457794, 2.517651044517231, 1.9072620881749476, 3.956922472792971, 4.212027549197521, 3.8279049517676897, 4.205578054360957, 3.8368223397795145, 1.996273470615023, 2.5344826256045234, 1.0059106425655413, 2.6147332955376594, 3.299396675706789, 2.7685344130327407, 1.1900537491251748, 3.366302331679871, 3.111771631883588, 3.896530334353401, 4.2222899239572405, 3.003754031029793, 2.234819483190339, 4.29689620979142, 68.2416090378991],
[1.9646156864949627, 4.295212452290718, 1.6872837298569818, 0.4737024028812806, 2.972124131415619, 0.8981286783881325, 4.088231597383933, 4.932977789053844, 3.716157248184756, 2.0484920244187115, 3.9370424640828086, 2.731798115127377, 3.7709079843404956, 3.4434972614912214, 4.124569015937394, 1.6779321321297653, 3.592810377045309, 1.7717643886531511, 3.1544570989223004, 3.68371615232277, 2.501450594176639, 4.18037398003833, 0.7061364173307851, 3.160010457006572, 3.8129633771596563, 4.363068994442327, 3.0022327516150615, 2.4897618289580423, 3.6829426295845513, 67.84541750190394],
[2.394428985138527, 3.9567571810704854, 3.9902793935141685, 2.703813999455459, 2.0272939395148946, 2.674894125797081, 3.398469424478178, 4.372704499886074, 2.5681934933884802, 2.1322539921454364, 3.935396834686186, 4.442897288683241, 3.6473256144790693, 3.4309815131146992, 4.058271645489589, 2.7723783562833253, 3.0363837112869123, 2.926940282102617, 4.175534873949518, 3.6728224347548393, 3.912917998884541, 4.14865036541528, 1.8983970923584315, 3.1350063727152473, 3.8958257141351433, 3.924157416405205, 2.8066127396737217, 2.3441978368889127, 4.0594800087728355, 68.23717363603858],
[2.5460032595838893, 3.3202455256307593, 4.067865951785377, 3.861026216662343, 2.8844055789395493, 3.5737930704519556, 4.176636413934679, 3.600142158362183, 3.4939139529268015, 1.9720729137370239, 4.00364248387838, 0.6876204699976489, 3.612669961193698, 1.8485535961274542, 3.4139164570538885, 2.24397292393015, 3.562575131619946, 3.9786112697273337, 2.411451701166187, 3.73610182948336, 3.389399098444656, 4.507281966361985, 2.540624960094659, 2.9093524019186168, 3.8146373965931124, 3.06952285959525, 2.9848765914529327, 2.508352145523039, 3.694428909257396, 65.94678687212253],
[2.0276894048046192, 1.0375415972916529, 3.6662814628876608, 2.277789092115077, 2.874392217243258, 4.232139683536234, 4.485336804579925, 3.082648076857791, 0.8221333349735238, 2.033958652892838, 4.459292186118455, 1.5066470817144682, 3.8076407833112245, 4.906011300134867, 4.141636688018873, 4.812871193294156, 0.849083357695382, 4.253046967619307, 3.300336878425716, 3.3025936961440614, 4.09001415792679, 3.8662405025304363, 4.9035238768681255, 2.5762614049036627, 3.8347282945041816, 2.6363439961717554, 2.914756250904357, 3.2267473543490786, 3.476060156336567, 68.0517795898312],
[1.9472982351154915, 3.7477534818881173, 4.635226086947129, 4.66213526419547, 3.0663820055941473, 3.084214479037377, 4.40132749379414, 3.757624817782152, 3.6179393224634793, 2.607772268004107, 4.367074236463514, 3.2404738204538974, 2.479221864786526, 3.500325419030585, 4.052892455669448, 1.132647655423695, 3.875371511497942, 4.281515549403369, 3.842083427805456, 3.757215647495702, 4.284434130646589, 0.9278957915368711, 4.546434890821643, 3.1446887728216137, 3.77448509774768, 3.1336437900706686, 2.917093105682243, 2.421843857823893, 4.740012222735518, 67.60900022929135],
[2.1340267907849726, 4.948896363890563, 0.16397837850445457, 2.9770787378557504, 3.7774168773439722, 4.497018741673363, 4.256679101138676, 1.4923380203615955, 3.281615561206386, 2.6757079308365173, 4.003640846539029, 4.730686527235119, 4.931071823616578, 1.3530368936002901, 4.154609052447292, 0.8172354276132137, 3.795115064199754, 1.0207994704584575, 4.207878845443247, 3.1862015281866096, 3.7586789466380366, 4.129880191978761, 4.187273110712169, 3.2672531953945256, 3.754348936592705, 3.089341482283587, 3.031619227883382, 2.3002466789424747, 1.9137456528736754, 67.54795554122384],
[2.290341264939261, 4.137456422471039, 3.579035594073232, 4.633365158278196, 2.973692839003316, 4.141327118184359, 0.07111267832469423, 3.973247058790368, 3.739681775509033, 2.482130662128688, 3.340158329008237, 4.977563770949937, 3.7650219773042046, 4.030462485363091, 3.2827316097132124, 4.496261805623687, 3.5909840566582947, 5.102242518914796, 3.3199981925459414, 3.6647679890892273, 4.064081388096143, 4.269931815735243, 0.06624383303558887, 3.1672479652873258, 4.183567099723977, 4.315806477572133, 3.10499561665155, 0.369634516657829, 3.698429883566864, 67.85043282118669],
[4.448073648960511, 3.4467654629822624, 4.724401392178014, 1.029222297799891, 3.7474152979086117, 5.04727038311073, 4.184856686113962, 3.4282751751023364, 4.355724079800677, 3.8129613341702995, 4.211159148777266, 3.160625054022425, 3.6645314403126865, 4.024733962986616, 4.122517941741448, 4.246571247560143, 3.6116456924528135, 4.170760675185075, 3.0387098808263096, 3.7424209989464803, 4.909060978587756, 3.123131797142273, 3.7695026644278764, 3.8555630124806934, 3.818804659124574, 2.636959320456207, 3.016438018010185, 2.098446817724687, 4.916391633245318, 67.94142726718465],
[2.0598956820032353, 3.646993748293639, 2.0990945946920614, 5.028831450817965, 2.110089932114048, 4.136499516449087, 3.661361102473384, 2.821081607765081, 2.857755498310531, 1.8333242881451475, 4.323139804090158, 4.962170302807813, 3.7544936814734498, 1.5509048550952742, 2.5127932891561966, 0.8534498649951491, 3.4480542368433795, 2.699006033981754, 3.2179816394759833, 2.6760134528804405, 1.461384159752804, 2.319596986373808, 2.972509999024831, 3.2949665893742233, 3.890119480320404, 0.9765004046191393, 2.953231303948298, 0.5108773195669776, 4.369999463640417, 67.39617657074074]
]
#归一化 MinmaxScaler MaxminScaler
#存储比例
MaxOfTestArray = []
def MinMaxScaler_test(x):
    for i in range(50):
        MaxOfTestArray.append(max(x[i]))
        for j in range(30):
            x[i][j] = x[i][j]/MaxOfTestArray[i]
    return x

def MaxMinScaler_test(x):
    for i in range(50):
        for j in range(30):
            x[i][j] = x[i][j]*MaxOfTestArray[i]
    return x
#找到目标值最小的元素所在的位置
def min_goal(x):
    m = []
    for i in range(len(encoder_result)):
        m.append(function.func1(x[i]))

    #print(m.index(min(m)))
    return m.index(min(m))

#随机替换testarray中的一个元素 将得到的新的元素加入到testarray后面
def new_test_array(x):
    a = random.choice(x)
    x.remove(a)
    x.append(decoder_result[min_goal(encoder_result)])
    return x
## 参数设置 ##
learning_rate = 1  # 学习率
training_epochs = 10  # 训练次数
batch_size = 10  # 一次训练输入的图片数量
display_step = 1  # 可视化步长
#examples_to_show = 10  # 显示10张
#n_input = 784  # 输入维度  28*28
n_input = 30

# 输入数据占位符
X = tf.placeholder("float", [None, n_input])
# 用字典的方式存储各隐藏层的参数
n_hidden_1 = 20  # 第一编码层神经元个数
n_hidden_2 = 10  # 第二编码层神经元个数
n_hidden_3 = 5  # 第三编码层神经元个数
n_hidden_4 = 2  # 第四编码层神经元个数
weights = {
    'encoder_h1': tf.Variable(tf.truncated_normal([n_input, n_hidden_1], )),
    'encoder_h2': tf.Variable(tf.truncated_normal([n_hidden_1, n_hidden_2], )),
    'encoder_h3': tf.Variable(tf.truncated_normal([n_hidden_2, n_hidden_3], )),
    'encoder_h4': tf.Variable(tf.truncated_normal([n_hidden_3, n_hidden_4], )),
    'decoder_h1': tf.Variable(tf.truncated_normal([n_hidden_4, n_hidden_3], )),
    'decoder_h2': tf.Variable(tf.truncated_normal([n_hidden_3, n_hidden_2], )),
    'decoder_h3': tf.Variable(tf.truncated_normal([n_hidden_2, n_hidden_1], )),
    'decoder_h4': tf.Variable(tf.truncated_normal([n_hidden_1, n_input], )),
}
biases = {
    'encoder_b1': tf.Variable(tf.random_normal([n_hidden_1])),
    'encoder_b2': tf.Variable(tf.random_normal([n_hidden_2])),
    'encoder_b3': tf.Variable(tf.random_normal([n_hidden_3])),
    'encoder_b4': tf.Variable(tf.random_normal([n_hidden_4])),
    'decoder_b1': tf.Variable(tf.random_normal([n_hidden_3])),
    'decoder_b2': tf.Variable(tf.random_normal([n_hidden_2])),
    'decoder_b3': tf.Variable(tf.random_normal([n_hidden_1])),
    'decoder_b4': tf.Variable(tf.random_normal([n_input])),
}


# 每一层结构都是 xW + b
# 构建编码器
def encoder(x):
    layer_1 = tf.nn.sigmoid(tf.add(tf.matmul(x, weights['encoder_h1']),
                                   biases['encoder_b1']))
    layer_2 = tf.nn.sigmoid(tf.add(tf.matmul(layer_1, weights['encoder_h2']),
                                   biases['encoder_b2']))
    layer_3 = tf.nn.sigmoid(tf.add(tf.matmul(layer_2, weights['encoder_h3']),
                                   biases['encoder_b3']))
    # 为了便于编码层的输出，编码层随后一层不使用激活函数
    layer_4 = tf.add(tf.matmul(layer_3, weights['encoder_h4']),
                     biases['encoder_b4'])
    return layer_4


# 构建解码器
def decoder(x):
    layer_1 = tf.nn.sigmoid(tf.add(tf.matmul(x, weights['decoder_h1']),
                                   biases['decoder_b1']))
    layer_2 = tf.nn.sigmoid(tf.add(tf.matmul(layer_1, weights['decoder_h2']),
                                   biases['decoder_b2']))
    layer_3 = tf.nn.sigmoid(tf.add(tf.matmul(layer_2, weights['decoder_h3']),
                                   biases['decoder_b3']))
    layer_4 = tf.add(tf.matmul(layer_3, weights['decoder_h4']),
                                   biases['decoder_b4'])
    return layer_4


# 构建模型
encoder_op = encoder(X)  # 编码
decoder_op = decoder(encoder_op)  # 解码

## 预测
y_pred = decoder_op
y_true = X

## 定义代价函数和优化器
# 最小二乘法  rmse
cost = tf.reduce_mean(tf.pow(y_true - y_pred, 2))
rmse = cost ** 0.5
# 优化函数   全局学习速率 0.01
optimizer = tf.train.AdamOptimizer(learning_rate).minimize(rmse)


def get_random_block_from_data(data, batch_size_1):
    start_index = np.random.randint(0, len(data) - batch_size_1)
    return data[start_index:(start_index + batch_size_1)]


def get_batchs(inputs=None, batch_size=None, shuffle=False):
    indices = np.arange(len(inputs))
    if shuffle:
        np.random.shuffle(indices)
    for start_idx in range(0, len(inputs) - batch_size + 1, batch_size):
        if shuffle:
            excerpt = indices[start_idx:start_idx + batch_size]
        else:
            excerpt = indices[start_idx:start_idx + batch_size]

        return inputs[excerpt]



with tf.Session() as sess:
    if int((tf.__version__).split('.')[1]) < 12 and int((tf.__version__).split('.')[0]) < 1:
        init = tf.initialize_all_variables()
    else:
        init = tf.global_variables_initializer()
    sess.run(init)

    # 首先计算总批数，保证每次循环训练集中的每个样本都参与训练，不同于批量训练
    # total_batch = int(50 / batch_size)  # 总批数55000/256
    # for epoch in range(training_epochs):  # 训练次数
    #     for i in range(total_batch):  # 每次训练遍历训练集所需次数
    #         #batch_xs, batch_ys = tf.train.batch([y_pred, y_true], batch_size=batch_size)
    #         batch = get_random_block_from_data(test_array, batch_size)
    #         _, c = sess.run([optimizer, rmse], feed_dict={X:batch })
    #     #print(c)
    #     if epoch % display_step == 0:  # 每隔 多少步显示一次
    #         print("Epoch:", '%04d' % (epoch + 1), "rmse=", "{:.9f}".format(c))
    # print("Optimization Finished!")
    # 显示编码结果 2维度
    encoder_result = sess.run(encoder_op, feed_dict={X: test_array})
    print('2维度的结果输出')
    print(encoder_result) #<class 'numpy.ndarray'>
    decoder_result = sess.run(decoder_op, feed_dict={X: test_array})
    print('维度还原之后的输出')
    # print(len(decoder_result[0]))
    a = []
    for i in range(len(encoder_result)):
        a.append(encoder_result[i][0])
    b = []
    for i in range(len(encoder_result)):
        b.append(encoder_result[i][1])
    plt.scatter(a,b)
    print(min_goal(encoder_result))
    #最终得出的粒子 decoder_result[min_goal(encoder_result)]
    print('--')
    print(decoder_result[min_goal(encoder_result)])
    print('--')
    print(new_test_array(test_array))
    #print(decoder_result)
    #print(test_array)
    plt.show()
